{"mappings":"gfAAAA,EAAA,S,2DAWMC,EAAWC,SAASC,cAAc,iBAClCC,EAAUF,SAASC,cAAc,uBACnCE,EAAOC,KAAKC,MAAMC,aAAaC,QAAQ,cAsF3C,SAASC,EAAgBC,GACvB,IACMC,EADUD,EAAIE,OAAOC,QAAQ,aAChBC,QAAQH,GAE7B,GAAGD,EAAIE,OAAOG,UAAUC,SAAS,mBAAmB,CAClD,IAAMC,EAAOP,EAAIE,OAAOC,QAAQ,aAEhCI,EAAKF,UAAUG,IAAI,UASrB,SAAoCP,GACnCP,EAAOC,KAAKC,MAAMC,aAAaC,QAAQ,cACxCW,QAAQC,IAAIhB,GACR,IAAMiB,EAAajB,EAAKkB,QAAO,SAAAL,G,OAAQA,EAAKM,MAAQZ,C,IACpDQ,QAAQC,IAAIC,GACZd,aAAaiB,QAAQ,YAAanB,KAAKoB,UAAUJ,IAC9CA,EAAWK,QACVC,IAGAC,MAAMF,OAAS,GACrBC,G,CAnBEE,CAA2BlB,GAI3BQ,QAAQC,IAAIH,E,EAqBhB,SAASU,IAUP3B,EAAS8B,UATc,kN,CAnHZ,OAAT1B,KAiBJ,SAAwB2B,GACtB,GAAqB,IAAjBA,EAAML,OAGN,YADAC,IAGAxB,GACFA,EAAQ6B,aAAa,SAAU,IAG/B,IAAIC,EAEFjC,IACHiC,EAASF,EACPG,KAAI,SAAAC,G,IAAEZ,EAAGY,EAAHZ,IAAKa,EAAMD,EAANC,OAAQC,EAAKF,EAALE,MAAOC,EAASH,EAATG,UAAWC,EAAUJ,EAAVI,WAAYC,EAAWL,EAAXK,YAAaC,EAASN,EAATM,UAErDxB,EAAO,eACuCyB,OADxBnB,EAAI,wFAGOmB,OAFaH,EAAW,+FAGhCG,OADQL,EAAM,gDAElBK,OADIJ,EAAU,2CAGVI,OAFJF,EAAY,8FAMlBE,OAJUN,EAAO,gHAOjBM,OAHAD,EAAU,GAAGE,IAAI,gIAOjBD,OAJAD,EAAU,GAAGE,IAAI,qHAIAD,OAAjBD,EAAU,GAAGE,IAAI,kQAiBtC,OAHA3C,EAAS4C,mBAAmB,YAAa3B,GAC/BhB,SAASC,cAAe,mBAClCiB,QAAQC,IAAIH,GACLA,C,IAER4B,KAAK,IACN1B,QAAQC,IAAIa,IAIhBjC,EAAS8C,iBAAiB,QAASrC,GACnCT,EAAS8B,UAAY,GACd9B,EAAS4C,mBAAmB,YAAaX,E,CA5EhDc,CAAe3C,GACbD,EAAQY,UAAUG,IAAI,U","sources":["src/shopping-list.js"],"sourcesContent":["import './js/header.js';\nimport './js/dark-theme.js';\nimport './js/slider.js';\n\n\n\n// import axios from 'axios';\nimport { fetchBookId } from './js/api';\n/// import { Loading } from 'notiflix';\n\n\nconst shopList = document.querySelector('.js-shop-list'); //list on link where adding books images\nconst shopBgd = document.querySelector('.js-shop-background'); //link div with base img\nlet data = JSON.parse(localStorage.getItem('shopplist')); // get from localStorage\n// console.log(data);\nconst BOOK_LS_KEY = 'shopplist'\nlet cardRef = null;\n\nif (data !== null) {\n  renderBookCard(data); // calling function render card\n    shopBgd.classList.add('hidden');\n}\n\nasync function showBook(_id) {\n  try {\n    data = await fetchBookId(_id);\n    console.log(data);\n      return await data;\n  } catch {\n    console.error(error);\n  }\n}\n// showBook(_id);\n// function render card this books from the local storage\n\nfunction renderBookCard(array) {\n  if (array.length === 0) {\n    // if the local storage is empty then get out from function\n      createEmptyCart()\n      return\n  }\n  if (shopBgd) {\n    shopBgd.setAttribute('hidden', ''); //adding to base img atribute hidden\n  }\n    \n    let markup;\n    \n  if (shopList) {\n   markup = array\n    .map(({_id, author, title, list_name, book_image, description, buy_links}) => {\n      \n        const card = `<li data-id=${_id} class=\"shop-item-book\">\n    <img class=\"shop-book-img\" alt=\"Wrapper of book\" src=\"${book_image}\" />\n          <div class=\"shop-info-book\">\n            <h2 class=\"shop-secondary-title\">${title}</h2>\n            <p class=\"shop-category\">${list_name}</p>\n            <p class=\"shop-desc\">${description}</p>\n            <div class=\"shop-author-wrapper\">\n              <p class=\"shop-author\">${author}</p>\n              <ul class=\"shop-platform-list\">\n        \n                \n                  <a href=\"${buy_links[0].url}\" class=\"shop-link-amazon\" noopener noreferrer>\n                                       </a>\n \n                  <a href=\"${buy_links[1].url}\" class=\"shop-link-applebook\" noopener noreferrer>\n                    </a>\n\n    \n                  <a href=\"${buy_links[4].url}\" class=\"shop-link-bookshop\">\n                    </a>\n                 \n  \n              </ul>\n            </div>\n          </div>\n           <button type=\"button\" class=\"shop-delete-btn js-delete-btn\">\n                  </button>\n        </li>`;\n\n      \n        \n  \n        shopList.insertAdjacentHTML('beforeend', card);\n        cardRef = document.querySelector(`.shop-item-book`);\n        console.log(card);\n        return card;\n    })\n      .join('');\n      console.log(markup);\n      \n    }\n  \n  shopList.addEventListener('click', onBtnTrashClick);\n  shopList.innerHTML = '';\n  return shopList.insertAdjacentHTML('beforeend', markup);\n}\n\n\nfunction onBtnTrashClick(evt) {\n  const element = evt.target.closest('[data-id]');\n  const id = element.dataset.id;\n// console.log(id)\nif(evt.target.classList.contains('shop-delete-btn')){\n  const card = evt.target.closest('[data-id]')\n\n  card.classList.add('hidden')\n    removeBookFromLocalStorage(id)\n    // console.log(check);\n\n \n    console.log(card);\n}\n}\n\nfunction removeBookFromLocalStorage(id) {\n data = JSON.parse(localStorage.getItem('shopplist'));\nconsole.log(data);\n    const filtredArr = data.filter(card => card._id !== id)\n    console.log(filtredArr);\n    localStorage.setItem('shopplist', JSON.stringify(filtredArr))\n  if (!filtredArr.length) {\n        createEmptyCart();\n\n}\n    if (check.length < 1) {\n  createEmptyCart()\n}\n  \n}\n\n\nfunction createEmptyCart() {\n    const markupEmpty = `\n  \n<div class=\"shop-base-background js-shop-background\">\n  <p class=\"shop-text-backgr\">\n    This page is empty, add some books and proceed to order.\n  </p>\n  <div class=\"shop-img-backgr\"></div>\n</div>`\n\n  shopList.innerHTML = markupEmpty;\n}\n\n"],"names":["parcelRequire","$818260bfa8f12ff7$var$shopList","document","querySelector","$818260bfa8f12ff7$var$shopBgd","$818260bfa8f12ff7$var$data","JSON","parse","localStorage","getItem","$818260bfa8f12ff7$var$onBtnTrashClick","evt","id","target","closest","dataset","classList","contains","card","add","console","log","filtredArr","filter","_id","setItem","stringify","length","$818260bfa8f12ff7$var$createEmptyCart","check","$818260bfa8f12ff7$var$removeBookFromLocalStorage","innerHTML","array","setAttribute","markup","map","param","author","title","list_name","book_image","description","buy_links","concat","url","insertAdjacentHTML","join","addEventListener","$818260bfa8f12ff7$var$renderBookCard"],"version":3,"file":"shopping-list.b984d702.js.map"}