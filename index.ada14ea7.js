!function(){function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},a=e.parcelRequired7c6;null==a&&((a=function(t){if(t in n)return n[t].exports;if(t in o){var e=o[t];delete o[t];var a={id:t,exports:{}};return n[t]=a,e.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){o[t]=e},e.parcelRequired7c6=a),a("iE7OH").register(JSON.parse('{"EVgbq":"index.ada14ea7.js","4IAcE":"image1@1x.06fa7713.png","ixwRt":"image1@2x.08fa6ff3.png","gcnlj":"image2@1x.57ecc8dc.png","hG39U":"image2@2x.c5385d25.png","iYXGX":"image3@1x.e5effbae.png","bPJ9f":"image3@2x.3b8922c8.png","eAXxV":"sprite.8887ca5d.svg","01IoP":"shopping-list.70e58168.js"}')),a("i8Q71"),a("8Veln");var r,c=a("bpxeT"),i=a("2TvXO"),s=a("b7ONl");r=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("4IAcE");var l;l=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("ixwRt");var d;d=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("gcnlj");var u;u=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("hG39U");var m;m=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("iYXGX");var f;f=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("bPJ9f");var p;p=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("eAXxV");var v=document.querySelector(".loader-backdrop"),g=document.body;function b(){v.classList.remove("is-hidden"),g.classList.add("loader-open")}function h(){v.classList.add("is-hidden"),g.classList.remove("loader-open")}var k=document.querySelector(".modal"),y=document.querySelector(".books-container-list"),x=document.querySelector(".backdrop"),_=document.body,E="shopplist";function L(){return(L=t(c)(t(i).mark((function e(n){var o,a,r,c,l,d;return t(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),console.log(n.target.nodeName),"UL"!==n.target.nodeName&&"BUTTON"!==n.target.nodeName){t.next=4;break}return t.abrupt("return");case 4:return b(),o=n.target.id,console.log(o),a=JSON.parse(localStorage.getItem(E))||[],t.prev=8,t.next=11,(0,s.fetchBookId)(o);case 11:r=t.sent,k.innerHTML=O(r),document.querySelector(".modal-close-btn").addEventListener("click",q),x.classList.remove("is-hidden"),_.classList.add("no-scroll"),window.addEventListener("keydown",H),c=document.querySelector(".modal-add-btn"),l=document.querySelector(".modal-remove-text"),a.some((function(t){return t._id===o}))?(c.textContent="remove from the shopping list",c.classList.replace("modal-add-btn","modal-remove-btn"),l.style.display="block",(d=document.querySelector(".modal-remove-btn")).addEventListener("click",(function(t){S(t,d,l,r)}))):c.addEventListener("click",(function(t){w(t,c,l,r)})),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(8),console.error(t.t0);case 26:return t.prev=26,h(),t.finish(26);case 29:case"end":return t.stop()}}),e,null,[[8,23,26,29]])})))).apply(this,arguments)}function w(t,e,n,o){if(t.target.classList.contains("modal-add-btn")){var a=JSON.parse(localStorage.getItem(E))||[];a.push(o),localStorage.setItem(E,JSON.stringify(a)),e.textContent="remove from the shopping list",e.classList.replace("modal-add-btn","modal-remove-btn"),n.style.display="block";var r=document.querySelector(".modal-remove-btn");r.addEventListener("click",(function(t){S(t,r,n,o)}))}}function S(t,e,n,o){if(t.target.classList.contains("modal-remove-btn")){var a=t.target.closest(".modal-id").dataset.id,r=(JSON.parse(localStorage.getItem(E))||[]).filter((function(t){return t._id!==a}));localStorage.setItem(E,JSON.stringify(r)),e.textContent="add to shopping list",e.classList.replace("modal-remove-btn","modal-add-btn"),n.classList.toggle("is-hidden"),e.addEventListener("click",(function(t){w(t,e,n,o)}))}}function O(e){var n=e._id,o=e.author,a=e.title,c=e.book_image,i=e.description,s=e.buy_links;return'\n  <button type="button" class="modal-close-btn dark-close-btn" data-modal-close>\n        <svg class="modal-close-png dark-close-png">\n          <use href="'.concat(t(p),'#x-close"></use>\n        </svg>\n      </button>\n  <div data-id=').concat(n,' class="modal-id dark-modal-id">\n  <div class="modal-card-item">\n   <img src="').concat(c,'" alt="').concat(a,'" class="modal-book-img dark-modal-book-img" />\n   <div class="">\n     <h2 class="modal-book-name dark-modal-book-name">').concat(a,'</h2>\n     <p class="modal-book-autor dark-modal-book-autor">').concat(o,'</p>\n     <p class="modal-book-info dark-modal-book-info">').concat(i,'</p>\n     <div class="modal-box-link dark-modal-box-link">\n       <a href="').concat(s[0].url,'" class="modal-link dark-modal-link" target="_blank">\n       <img class="modal-link-svg dark-modal-link-svg dark-amazon"\n       src="').concat(t(r),'"\n       srcset="\n       ').concat(t(r)," 1x,\n       ").concat(t(l),' 2x"\n       alt="amazon"\n       width="62"\n       height="19"\n     />\n       </a>\n       <a href="').concat(s[1].url,'" class="modal-link dark-modal-link" target="_blank">\n       <img class="modal-link-svg dark-modal-link-svg"\n       src="').concat(t(d),'"\n       srcset="\n       ').concat(t(d)," 1x,\n       ").concat(t(u),' 2x"\n       alt="apple-books"\n       width="33"\n       height="32"\n     />\n       </a>\n       <a href="').concat(s[4].url,'" target="_blank" class="modal-link dark-modal-link">\n       <img class="modal-link-svg dark-modal-link-svg"\n          src="').concat(t(m),'"\n          srcset="\n          ').concat(t(m)," 1x,\n          ").concat(t(f),' 2x"\n          alt="bookshop"\n          width="38"\n          height="36"\n        />\n     </a>\n       </div>\n    </div>\n    </div>\n    <button type="button" class="modal-add-btn dark-modal-add-btn">add to shopping list</button>\n    <p class="modal-remove-text dark-modal-remove-text">Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.</p>\n    </div>\n       ')}function q(){x.classList.add("is-hidden"),_.classList.remove("no-scroll"),window.removeEventListener("keydown",H)}function H(t){"Escape"===t.code&&(q(),_.classList.remove("no-scroll"),window.removeEventListener("keydown",H))}y.addEventListener("click",(function(t){return L.apply(this,arguments)})),x.addEventListener("click",(function(t){t.target.classList.contains("backdrop")&&q()}));c=a("bpxeT");var T,N,j=a("1t1Wn"),R=(i=a("2TvXO"),s=a("b7ONl"),c=a("bpxeT"),i=a("2TvXO"),s=a("b7ONl"),document.querySelector(".categories_list")),C=document.querySelector(".books-container-list"),A="";function B(t){return J.apply(this,arguments)}function J(){return(J=t(c)(t(i).mark((function e(n){var o;return t(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b(),t.prev=1,t.next=4,(0,s.fetchSelectCategory)(n);case 4:o=t.sent,I(n),C.innerHTML=V(o),h(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.error(t.t0);case 13:case"end":return t.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function I(t){T=document.querySelector(".title-color1"),N=document.querySelector(".title-color2"),T.textContent=t.substring(0,U(t)),N.textContent=t.substring(U(t))}function U(t){return t.lastIndexOf(" ")}function V(t){var e=F();return t.map((function(t){var n=t._id,o=t.book_image,a=t.title,r=t.author,c=o||e;return'<li class="book-card" id="'.concat(n,'">\n  <a href="" class="book-card-thumb" id="').concat(n,'"\n    ><div class="thumb">\n    <img id="').concat(n,'" src="').concat(c,'" alt="').concat(a,'" class="books-image" onerror="handleImageError(this, ').concat(e,')" />\n    <div id="').concat(n,'" class="overlay"><p id="').concat(n,'"> quick view</p></div>\n    </div>\n    <p id="').concat(n,'" class="book-card-title">').concat(a,'</p>\n    <p id="').concat(n,'" class="book-card-author">').concat(r,"</p\n  ></a></li>")})).join("")}function F(){return window.matchMedia("(min-width: 1440px)").matches?"../img/default_images/default_img_desc.jpg":window.matchMedia("(min-width: 768px)").matches?"../img/default_images/default_img_table.jpg":"../img/default_images/default_img_mobile.jpg"}R.addEventListener("click",(function(t){var e=document.querySelector(".chosen_category");if(t.target!==e&&t.target!==t.currentTarget){if("All Categories"===t.target.textContent)return P(),A=t.target.textContent,e.classList.remove("chosen_category"),t.target.classList.add("chosen_category"),I("Best Sellers Books"),void(e=t.target);A=t.target.textContent,e.classList.remove("chosen_category"),t.target.classList.add("chosen_category"),e=t.target,B(A)}}));c=a("bpxeT"),i=a("2TvXO"),s=a("b7ONl");var M=document.querySelector(".categories_list");function X(){return D.apply(this,arguments)}function D(){return(D=t(c)(t(i).mark((function e(){var n;return t(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,s.fetchCategoryList)();case 3:n=t.sent,M.insertAdjacentHTML("beforeend",G(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(error);case 10:case"end":return t.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function G(t){return t.map((function(t){var e=t.list_name;return'<li class="js_category_list_element category_list_element" data="'.concat(e,'">').concat(e,"</li>")})).join("")}function P(){return W.apply(this,arguments)}function W(){return(W=t(c)(t(i).mark((function e(){var n,o;return t(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b(),t.prev=1,t.next=4,(0,s.fetchTopBooks)();case 4:n=t.sent,o=document.querySelector(".books-container-list"),I("Best Sellers Books"),o.innerHTML=Y(n),$(document.querySelectorAll(".button-open-categories")),h(),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),console.error(t.t0);case 16:case"end":return t.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function $(t){t.forEach((function(t){t.addEventListener("click",(function(){var e=t.getAttribute("data-list");B(e);var n=document.querySelector('[data="'.concat(e,'"]'));document.querySelector(".chosen_category").classList.remove("chosen_category"),n.classList.add("chosen_category"),n.scrollIntoView({block:"center",behavior:"smooth"})}))}))}function Y(t){return t.map((function(t){var e=t.list_name,n=t.books;return'<li class="top-books-ul">\n      <h2 class="top-books-category">'.concat(e,'</h2>\n      <ul class="top-books-list">').concat(function(t){var e=F();return t.map((function(t){var n=t._id,o=t.book_image,a=t.title,r=t.author,c=o||e;return'<li class="top-book-card" id="'.concat(n,'">\n  <a href="" class="book-card-thumb" id="').concat(n,'">\n    <div class="thumb">\n      <img id="').concat(n,'" src="').concat(c,'" alt="').concat(a,'" class="books-image" onerror="handleImageError(this, ').concat(e,')" />\n      <div class="overlay" id="').concat(n,'"><p id="').concat(n,'"> quick view</p></div>\n    </div>\n    <p id="').concat(n,'" class="book-card-title">').concat(a,'</p>\n    <p id="').concat(n,'" class="book-card-author">').concat(r,"</p>\n    </a></li>")})).join("")}(n),"</ul>\n      ").concat(function(t){return'\n      <div class="div-button">\n        <button data-list="'.concat(t,'" href="" class="button-open-categories">SEE MORE</button>\n      </div>\n    ')}(e),"\n        </li>\n        ")})).join("")}function z(){return(z=t(c)(t(i).mark((function e(){return t(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(),e.prev=1,e.t0=t(j),e.next=5,Promise.all([X(),P()]);case 5:e.t1=e.sent,(0,e.t0)(e.t1,0),h(),e.next=13;break;case 10:e.prev=10,e.t2=e.catch(1),console.error(e.t2);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}!function(){z.apply(this,arguments)}(),a("32ZrB");var Q,Z=a("l5bVx"),K="Expected a function",tt=/^\s+|\s+$/g,et=/^[-+]0x[0-9a-f]+$/i,nt=/^0b[01]+$/i,ot=/^0o[0-7]+$/i,at=parseInt,rt="object"==typeof e&&e&&e.Object===Object&&e,ct="object"==typeof self&&self&&self.Object===Object&&self,it=rt||ct||Function("return this")(),st=Object.prototype.toString,lt=Math.max,dt=Math.min,ut=function(){return it.Date.now()};function mt(t,e,n){var o,a,r,c,i,s,l=0,d=!1,u=!1,m=!0;if("function"!=typeof t)throw new TypeError(K);function f(e){var n=o,r=a;return o=a=void 0,l=e,c=t.apply(r,n)}function p(t){return l=t,i=setTimeout(g,e),d?f(t):c}function v(t){var n=t-s;return void 0===s||n>=e||n<0||u&&t-l>=r}function g(){var t=ut();if(v(t))return b(t);i=setTimeout(g,function(t){var n=e-(t-s);return u?dt(n,r-(t-l)):n}(t))}function b(t){return i=void 0,m&&o?f(t):(o=a=void 0,c)}function h(){var t=ut(),n=v(t);if(o=arguments,a=this,s=t,n){if(void 0===i)return p(s);if(u)return i=setTimeout(g,e),f(s)}return void 0===i&&(i=setTimeout(g,e)),c}return e=pt(e)||0,ft(n)&&(d=!!n.leading,r=(u="maxWait"in n)?lt(pt(n.maxWait)||0,e):r,m="trailing"in n?!!n.trailing:m),h.cancel=function(){void 0!==i&&clearTimeout(i),l=0,o=s=a=i=void 0},h.flush=function(){return void 0===i?c:b(ut())},h}function ft(e){var n=void 0===e?"undefined":t(Z)(e);return!!e&&("object"==n||"function"==n)}function pt(e){if("number"==typeof e)return e;if(function(e){return"symbol"==(void 0===e?"undefined":t(Z)(e))||function(t){return!!t&&"object"==typeof t}(e)&&"[object Symbol]"==st.call(e)}(e))return NaN;if(ft(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=ft(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(tt,"");var o=nt.test(e);return o||ot.test(e)?at(e.slice(2),o?2:8):et.test(e)?NaN:+e}Q=function(t,e,n){var o=!0,a=!0;if("function"!=typeof t)throw new TypeError(K);return ft(n)&&(o="leading"in n?!!n.leading:o,a="trailing"in n?!!n.trailing:a),mt(t,e,{leading:o,maxWait:e,trailing:a})};var vt=document.querySelector(".scroll-up");vt.addEventListener("click",(function(){return window.scrollTo({top:0,left:0,behavior:"smooth"})})),document.addEventListener("scroll",t(Q)((function(){var t=document.documentElement,e=t.scrollTop,n=t.scrollHeight-t.clientHeight;e/n>.05?vt.classList.add("showButton"):vt.classList.remove("showButton")}),1e3))}();
//# sourceMappingURL=index.ada14ea7.js.map
