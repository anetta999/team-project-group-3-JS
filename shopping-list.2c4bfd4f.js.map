{"mappings":"gfAAAA,EAAA,S,kEAMA,IAAMC,EAAWC,SAASC,cAAc,iBAClCC,EAAUF,SAASC,cAAc,uBACnCE,EAAOC,KAAKC,MAAMC,aAAaC,QAAQ,cA+F3C,SAASC,EAAgBC,GACvB,IACMC,EADUD,EAAIE,OAAOC,QAAQ,aAChBC,QAAQH,GAEvBD,EAAIE,OAAOG,UAAUC,SAAS,qBACnBN,EAAIE,OAAOC,QAAQ,aAE3BE,UAAUE,IAAI,UAQvB,SAAoCN,GAGlC,IAAMO,GAFNd,EAAOC,KAAKC,MAAMC,aAAaC,QAAQ,eAEfW,QAAO,SAAAC,G,OAAQA,EAAKC,MAAQV,C,IAEpDJ,aAAae,QAAQ,YAAajB,KAAKkB,UAAUL,IAC5CA,EAAWM,QACdC,G,CAdAC,CAA2Bf,G,CAkB/B,SAASc,IAUPzB,EAAS2B,UATY,kN,CApHV,OAATvB,KAiBJ,SAAwBwB,GACtB,GAAqB,IAAjBA,EAAMJ,OAGR,YADAC,IAGEtB,GACFA,EAAQ0B,aAAa,SAAU,IAGjC,IAAIC,EAEA9B,IACF8B,EAASF,EACNG,KACC,SAAAC,G,IACEX,EAAGW,EAAHX,IACAY,EAAMD,EAANC,OACAC,EAAKF,EAALE,MACAC,EAASH,EAATG,UACAC,EAAUJ,EAAVI,WACAC,EAAWL,EAAXK,YACAC,EAASN,EAATM,UAEMlB,EAAO,eACwCmB,OADzBlB,EAAI,2FAI2BkB,OAHNH,EAAW,6JAIlCG,OAD6BL,EAAM,iDAE7BK,OADNJ,EAAU,sDAIXI,OAHOF,EAAY,sHAO7BE,OAJUN,EAAO,gHAOjBM,OAHAD,EAAU,GAAGE,IAAI,4IAOjBD,OAJAD,EAAU,GAAGE,IAAI,qHAIAD,OAAjBD,EAAU,GAAGE,IAAI,gRAgBpC,OAHAxC,EAASyC,mBAAmB,YAAarB,GAC/BnB,SAASC,cAAe,mBAE3BkB,C,IAGVsB,KAAK,KAIV1C,EAAS2C,iBAAiB,QAASlC,GACnCT,EAAS2B,UAAY,GACd3B,EAASyC,mBAAmB,YAAaX,E,CArFhDc,CAAexC,GACfD,EAAQY,UAAUE,IAAI,U","sources":["src/shopping-list.js"],"sourcesContent":["import './js/header.js';\nimport './js/dark-theme.js';\nimport './js/slider.js';\n\nimport { fetchBookId } from './js/api';\n\nconst shopList = document.querySelector('.js-shop-list'); //list on link where adding books images\nconst shopBgd = document.querySelector('.js-shop-background'); //link div with base img\nlet data = JSON.parse(localStorage.getItem('shopplist')); // get from localStorage\n\n// let check = [];\nconst BOOK_LS_KEY = 'shopplist';\nlet cardRef = null;\n\nif (data !== null) {\n  renderBookCard(data); // calling function render card\n  shopBgd.classList.add('hidden');\n}\n\nasync function showBook(_id) {\n  try {\n    data = await fetchBookId(_id);\n    // console.log(data);\n    return await data;\n  } catch {\n    console.error(error);\n  }\n}\n\n// function render card this books from the local storage\n\nfunction renderBookCard(array) {\n  if (array.length === 0) {\n    // if the local storage is empty then get out from function\n    createEmptyCart();\n    return;\n  }\n  if (shopBgd) {\n    shopBgd.setAttribute('hidden', ''); //adding to base img atribute hidden\n  }\n\n  let markup;\n\n  if (shopList) {\n    markup = array\n      .map(\n        ({\n          _id,\n          author,\n          title,\n          list_name,\n          book_image,\n          description,\n          buy_links,\n        }) => {\n          const card = `<li data-id=${_id} class=\"shop-item-book\">\n       <img class=\"shop-book-img\" alt=\"Wrapper of book\" src=\"${book_image}\" />\n       <div class=\"wrapper-descr\">\n              <div class=\"shop-info-book\">\n            <h2 class=\"shop-secondary-title header-link-shopping \">${title}</h2>\n            <p class=\"shop-category \">${list_name}</p>\n            <p class=\"shop-desc dark-desc \">${description}</p>\n                </div>\n            <div class=\"shop-author-wrapper\">\n              <p class=\"shop-author\">${author}</p>\n              <ul class=\"shop-platform-list\">\n        \n                \n                  <a href=\"${buy_links[0].url}\" class=\"shop-link-amazon dark-amazon\" noopener noreferrer>\n                                       </a>\n \n                  <a href=\"${buy_links[1].url}\" class=\"shop-link-applebook\" noopener noreferrer>\n                    </a>\n\n    \n                  <a href=\"${buy_links[4].url}\" class=\"shop-link-bookshop\">\n                    </a>\n                 \n  \n              </ul>\n        \n          </div>\n          </div> \n   \n           <button type=\"button\" class=\"shop-delete-btn js-delete-btn\">\n                  </button>\n        </li>`;\n\n          shopList.insertAdjacentHTML('beforeend', card);\n          cardRef = document.querySelector(`.shop-item-book`);\n          // console.log(card);\n          return card;\n        }\n      )\n      .join('');\n    // console.log(markup);\n  }\n\n  shopList.addEventListener('click', onBtnTrashClick);\n  shopList.innerHTML = '';\n  return shopList.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction onBtnTrashClick(evt) {\n  const element = evt.target.closest('[data-id]');\n  const id = element.dataset.id;\n  // console.log(id)\n  if (evt.target.classList.contains('shop-delete-btn')) {\n    const card = evt.target.closest('[data-id]');\n\n    card.classList.add('hidden');\n    removeBookFromLocalStorage(id);\n    // console.log(check);\n\n    // console.log(card);\n  }\n}\n\nfunction removeBookFromLocalStorage(id) {\n  data = JSON.parse(localStorage.getItem('shopplist'));\n  // console.log(data);\n  const filtredArr = data.filter(card => card._id !== id);\n  // console.log(filtredArr);\n  localStorage.setItem('shopplist', JSON.stringify(filtredArr));\n  if (!filtredArr.length) {\n    createEmptyCart();\n  }\n}\n\nfunction createEmptyCart() {\n  const markupEmpty = `\n  \n<div class=\"shop-base-background js-shop-background\">\n  <p class=\"shop-text-backgr\">\n    This page is empty, add some books and proceed to order.\n  </p>\n  <div class=\"shop-img-backgr\"></div>\n</div>`;\n\n  shopList.innerHTML = markupEmpty;\n}\n\nimport './js/footer.js';\n"],"names":["parcelRequire","$818260bfa8f12ff7$var$shopList","document","querySelector","$818260bfa8f12ff7$var$shopBgd","$818260bfa8f12ff7$var$data","JSON","parse","localStorage","getItem","$818260bfa8f12ff7$var$onBtnTrashClick","evt","id","target","closest","dataset","classList","contains","add","filtredArr","filter","card","_id","setItem","stringify","length","$818260bfa8f12ff7$var$createEmptyCart","$818260bfa8f12ff7$var$removeBookFromLocalStorage","innerHTML","array","setAttribute","markup","map","param","author","title","list_name","book_image","description","buy_links","concat","url","insertAdjacentHTML","join","addEventListener","$818260bfa8f12ff7$var$renderBookCard"],"version":3,"file":"shopping-list.2c4bfd4f.js.map"}