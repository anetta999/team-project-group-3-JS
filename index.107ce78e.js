!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){o[e]=t},t.parcelRequired7c6=a),a("iE7OH").register(JSON.parse('{"EVgbq":"index.107ce78e.js","4IAcE":"image1@1x.06fa7713.png","ixwRt":"image1@2x.08fa6ff3.png","gcnlj":"image2@1x.57ecc8dc.png","hG39U":"image2@2x.c5385d25.png","iYXGX":"image3@1x.e5effbae.png","bPJ9f":"image3@2x.3b8922c8.png","eAXxV":"sprite.70757e6b.svg","01IoP":"shopping-list.77080875.js"}')),a("i8Q71"),a("8Veln");var r,c=a("bpxeT"),i=a("2TvXO"),s=a("b7ONl");r=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("4IAcE");var l;l=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("ixwRt");var d;d=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("gcnlj");var u;u=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("hG39U");var m;m=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("iYXGX");var f;f=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("bPJ9f");var p;p=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("eAXxV");var v=document.querySelector(".loader-backdrop"),g=document.body;function b(){v.classList.remove("is-hidden"),g.classList.add("loader-open")}function h(){v.classList.add("is-hidden"),g.classList.remove("loader-open")}var k=a("gnsaF"),y=document.querySelector(".modal"),x=document.querySelector(".books-container-list"),_=document.querySelector(".backdrop"),E=document.querySelector("#no-scroll"),L=k.disableBodyScroll,S=k.enableBodyScroll,w="shopplist";function O(){return(O=e(c)(e(i).mark((function t(n){var o,a,r,c,l,d;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),"IMG"===n.target.nodeName){e.next=3;break}return e.abrupt("return");case 3:return b(),o=n.target.id,a=JSON.parse(localStorage.getItem(w))||[],e.prev=6,e.next=9,(0,s.fetchBookId)(o);case 9:r=e.sent,y.innerHTML=T(r),document.querySelector(".modal-close-btn").addEventListener("click",N),_.classList.remove("is-hidden"),window.addEventListener("keydown",j),L(E),c=document.querySelector(".modal-add-btn"),l=document.querySelector(".modal-remove-text"),a.some((function(e){return e._id===o}))?(c.textContent="remove from the shopping list",c.classList.replace("modal-add-btn","modal-remove-btn"),l.classList.toggle("is-hidden"),(d=document.querySelector(".modal-remove-btn")).addEventListener("click",(function(e){H(e,d,l,r)}))):c.addEventListener("click",(function(e){q(e,c,l,r)})),h(),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(6),console.error(e.t0);case 25:case"end":return e.stop()}}),t,null,[[6,22]])})))).apply(this,arguments)}function q(e,t,n,o){if(e.target.classList.contains("modal-add-btn")){var a=JSON.parse(localStorage.getItem(w))||[];a.push(o),localStorage.setItem(w,JSON.stringify(a)),t.textContent="remove from the shopping list",t.classList.replace("modal-add-btn","modal-remove-btn"),n.classList.toggle("is-hidden");var r=document.querySelector(".modal-remove-btn");r.addEventListener("click",(function(e){H(e,r,n,o)}))}}function H(e,t,n,o){if(e.target.classList.contains("modal-remove-btn")){var a=e.target.closest(".modal-id").dataset.id,r=(JSON.parse(localStorage.getItem(w))||[]).filter((function(e){return e._id!==a}));localStorage.setItem(w,JSON.stringify(r)),t.textContent="add to shopping list",t.classList.replace("modal-remove-btn","modal-add-btn"),n.classList.toggle("is-hidden"),t.addEventListener("click",(function(e){q(e,t,n,o)}))}}function T(t){var n=t._id,o=t.author,a=t.title,c=t.book_image,i=t.description,s=t.buy_links;return'\n  <button type="button" class="modal-close-btn dark-close-btn" data-modal-close>\n        <svg class="modal-close-png dark-close-png">\n          <use href="'.concat(e(p),'#x-close"></use>\n        </svg>\n      </button>\n  <div data-id=').concat(n,' class="modal-id dark-modal-id">\n  <div class="modal-card-item">\n   <img src="').concat(c,'" alt="').concat(a,'" class="modal-book-img dark-modal-book-img" />\n   <div class="">\n     <h2 class="modal-book-name dark-modal-book-name">').concat(a,'</h2>\n     <p class="modal-book-autor dark-modal-book-autor">').concat(o,'</p>\n     <p class="modal-book-info dark-modal-book-info">').concat(i,'</p>\n     <div class="modal-box-link dark-modal-box-link">\n       <a href="').concat(s[0].url,'" class="modal-link dark-modal-link" target="_blank">\n       <img class="modal-link-svg dark-modal-link-svg"\n       src="').concat(e(r),'"\n       srcset="\n       ').concat(e(r)," 1x,\n       ").concat(e(l),' 2x"\n       alt="amazon"\n       width="62"\n       height="19"\n     />\n       </a>\n       <a href="').concat(s[1].url,'" class="modal-link dark-modal-link" target="_blank">\n       <img class="modal-link-svg dark-modal-link-svg"\n       src="').concat(e(d),'"\n       srcset="\n       ').concat(e(d)," 1x,\n       ").concat(e(u),' 2x"\n       alt="apple-books"\n       width="33"\n       height="32"\n     />\n       </a>\n       <a href="').concat(s[4].url,'" target="_blank" class="modal-link dark-modal-link">\n       <img class="modal-link-svg dark-modal-link-svg"\n          src="').concat(e(m),'"\n          srcset="\n          ').concat(e(m)," 1x,\n          ").concat(e(f),' 2x"\n          alt="bookshop"\n          width="38"\n          height="36"\n        />\n     </a>\n       </div>\n    </div>\n    </div>\n    <button type="button" class="modal-add-btn dark-modal-add-btn">add to shopping list</button>\n    <p class="modal-remove-text dark-modal-remove-text is-hidden">Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.</p>\n    </div>\n       ')}function N(){_.classList.add("is-hidden"),window.removeEventListener("keydown",j),S(E)}function j(e){"Escape"===e.code&&(N(),window.removeEventListener("keydown",j),S(E))}x.addEventListener("click",(function(e){return O.apply(this,arguments)})),_.addEventListener("click",(function(e){e.target.classList.contains("backdrop")&&N()}));c=a("bpxeT");var R,C,B=a("1t1Wn"),A=(i=a("2TvXO"),s=a("b7ONl"),c=a("bpxeT"),i=a("2TvXO"),s=a("b7ONl"),document.querySelector(".categories_list")),I=document.querySelector(".books-container-list"),J="";function V(e){return F.apply(this,arguments)}function F(){return(F=e(c)(e(i).mark((function t(n){var o;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(),e.prev=1,e.next=4,(0,s.fetchSelectCategory)(n);case 4:o=e.sent,M(n),I.innerHTML=X(o),h(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),t,null,[[1,10]])})))).apply(this,arguments)}function M(e){R=document.querySelector(".title-color1"),C=document.querySelector(".title-color2"),R.textContent=e.substring(0,U(e)),C.textContent=e.substring(U(e))}function U(e){return e.lastIndexOf(" ")}function X(e){var t=G();return e.map((function(e){var n=e._id,o=e.book_image,a=e.title,r=e.author,c=o||t;return'<li class="book-card">\n  <a href="" class="book-card-thumb"\n    ><div class="thumb">\n    <img id="'.concat(n,'" src="').concat(c,'" alt="').concat(a,'" class="books-image" onerror="handleImageError(this, ').concat(t,')" />\n    <div class="overlay"><p> quick view</p></div>\n    </div>\n    <p class="book-card-title">').concat(a,'</p>\n    <p class="book-card-author">').concat(r,"</p\n  ></a></li>")})).join("")}function G(){return window.matchMedia("(min-width: 1440px)").matches?"../img/default_images/default_img_desc.jpg":window.matchMedia("(min-width: 768px)").matches?"../img/default_images/default_img_table.jpg":"../img/default_images/default_img_mobile.jpg"}A.addEventListener("click",(function(e){var t=document.querySelector(".chosen_category");if(e.target!==t&&e.target!==e.currentTarget){if("All Categories"===e.target.textContent)return Y(),J=e.target.textContent,t.classList.remove("chosen_category"),e.target.classList.add("chosen_category"),M("Best Sellers Books"),void(t=e.target);J=e.target.textContent,t.classList.remove("chosen_category"),e.target.classList.add("chosen_category"),t=e.target,V(J)}}));c=a("bpxeT"),i=a("2TvXO"),s=a("b7ONl");var D=document.querySelector(".categories_list");function P(){return W.apply(this,arguments)}function W(){return(W=e(c)(e(i).mark((function t(){var n;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.fetchCategoryList)();case 3:n=e.sent,D.insertAdjacentHTML("beforeend",$(n)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(error);case 10:case"end":return e.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function $(e){return e.map((function(e){var t=e.list_name;return'<li class="js_category_list_element category_list_element" data="'.concat(t,'">').concat(t,"</li>")})).join("")}function Y(){return z.apply(this,arguments)}function z(){return(z=e(c)(e(i).mark((function t(){var n,o;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(),e.prev=1,e.next=4,(0,s.fetchTopBooks)();case 4:n=e.sent,o=document.querySelector(".books-container-list"),M("Best Sellers Books"),o.innerHTML=Z(n),Q(document.querySelectorAll(".button-open-categories")),h(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0);case 16:case"end":return e.stop()}}),t,null,[[1,13]])})))).apply(this,arguments)}function Q(e){e.forEach((function(e){e.addEventListener("click",(function(){var t=e.getAttribute("data-list");V(t);var n=document.querySelector('[data="'.concat(t,'"]'));document.querySelector(".chosen_category").classList.remove("chosen_category"),n.classList.add("chosen_category"),n.scrollIntoView({block:"center",behavior:"smooth"})}))}))}function Z(e){return e.map((function(e){var t=e.list_name,n=e.books;return'<li class="top-books-ul">\n      <h2 class="top-books-category">'.concat(t,'</h2>\n      <ul class="top-books-list">').concat(function(e){var t=G();return e.map((function(e){var n=e._id,o=e.book_image,a=e.title,r=e.author,c=o||t;return'<li class="top-book-card">\n  <a href="" class="book-card-thumb"\n    ><div class="thumb">\n    <img id="'.concat(n,'" src="').concat(c,'" alt="').concat(a,'" class="books-image" onerror="handleImageError(this, ').concat(t,')" />\n    <div class="overlay"><p> quick view</p></div>\n    </div>\n    <p class="book-card-title">').concat(a,'</p>\n    <p class="book-card-author">').concat(r,"</p\n  ></a></li>")})).join("")}(n),"</ul>\n      ").concat(function(e){return'\n      <div class="div-button">\n        <button data-list="'.concat(e,'" href="" class="button-open-categories">SEE MORE</button>\n      </div>\n    ')}(t),"\n        </li>\n        ")})).join("")}function K(){return(K=e(c)(e(i).mark((function t(){return e(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b(),t.prev=1,t.t0=e(B),t.next=5,Promise.all([P(),Y()]);case 5:t.t1=t.sent,(0,t.t0)(t.t1,0),h(),t.next=13;break;case 10:t.prev=10,t.t2=t.catch(1),console.error(t.t2);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))).apply(this,arguments)}!function(){K.apply(this,arguments)}(),a("32ZrB");var ee,te=a("l5bVx"),ne="Expected a function",oe=/^\s+|\s+$/g,ae=/^[-+]0x[0-9a-f]+$/i,re=/^0b[01]+$/i,ce=/^0o[0-7]+$/i,ie=parseInt,se="object"==typeof t&&t&&t.Object===Object&&t,le="object"==typeof self&&self&&self.Object===Object&&self,de=se||le||Function("return this")(),ue=Object.prototype.toString,me=Math.max,fe=Math.min,pe=function(){return de.Date.now()};function ve(e,t,n){var o,a,r,c,i,s,l=0,d=!1,u=!1,m=!0;if("function"!=typeof e)throw new TypeError(ne);function f(t){var n=o,r=a;return o=a=void 0,l=t,c=e.apply(r,n)}function p(e){return l=e,i=setTimeout(g,t),d?f(e):c}function v(e){var n=e-s;return void 0===s||n>=t||n<0||u&&e-l>=r}function g(){var e=pe();if(v(e))return b(e);i=setTimeout(g,function(e){var n=t-(e-s);return u?fe(n,r-(e-l)):n}(e))}function b(e){return i=void 0,m&&o?f(e):(o=a=void 0,c)}function h(){var e=pe(),n=v(e);if(o=arguments,a=this,s=e,n){if(void 0===i)return p(s);if(u)return i=setTimeout(g,t),f(s)}return void 0===i&&(i=setTimeout(g,t)),c}return t=be(t)||0,ge(n)&&(d=!!n.leading,r=(u="maxWait"in n)?me(be(n.maxWait)||0,t):r,m="trailing"in n?!!n.trailing:m),h.cancel=function(){void 0!==i&&clearTimeout(i),l=0,o=s=a=i=void 0},h.flush=function(){return void 0===i?c:b(pe())},h}function ge(t){var n=void 0===t?"undefined":e(te)(t);return!!t&&("object"==n||"function"==n)}function be(t){if("number"==typeof t)return t;if(function(t){return"symbol"==(void 0===t?"undefined":e(te)(t))||function(e){return!!e&&"object"==typeof e}(t)&&"[object Symbol]"==ue.call(t)}(t))return NaN;if(ge(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=ge(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(oe,"");var o=re.test(t);return o||ce.test(t)?ie(t.slice(2),o?2:8):ae.test(t)?NaN:+t}ee=function(e,t,n){var o=!0,a=!0;if("function"!=typeof e)throw new TypeError(ne);return ge(n)&&(o="leading"in n?!!n.leading:o,a="trailing"in n?!!n.trailing:a),ve(e,t,{leading:o,maxWait:t,trailing:a})};var he=document.querySelector(".scroll-up");he.addEventListener("click",(function(){return window.scrollTo({top:0,left:0,behavior:"smooth"})})),document.addEventListener("scroll",e(ee)((function(){var e=document.documentElement,t=e.scrollTop,n=e.scrollHeight-e.clientHeight;t/n>.05?he.classList.add("showButton"):he.classList.remove("showButton")}),1e3))}();
//# sourceMappingURL=index.107ce78e.js.map
