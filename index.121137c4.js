function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},n={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in o)return o[e].exports;if(e in n){var t=n[e];delete n[e];var a={id:e,exports:{}};return o[e]=a,t.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},t.parcelRequired7c6=a),a("kyEFX").register(JSON.parse('{"5ZPII":"index.121137c4.js","W29aZ":"image1@1x.06fa7713.png","haIWG":"image1@2x.08fa6ff3.png","ekMUd":"image2@1x.57ecc8dc.png","g0EyN":"image2@2x.c5385d25.png","3SFpC":"image3@1x.e5effbae.png","60fzs":"image3@2x.3b8922c8.png","8SaHN":"sprite.8887ca5d.svg","a8cj2":"shopping-list.cef353d2.js"}')),a("bUb57"),a("7tzR7");var r,i=a("7rYDH");r=new URL(a("kyEFX").resolve("W29aZ"),import.meta.url).toString();var s;s=new URL(a("kyEFX").resolve("haIWG"),import.meta.url).toString();var l;l=new URL(a("kyEFX").resolve("ekMUd"),import.meta.url).toString();var c;c=new URL(a("kyEFX").resolve("g0EyN"),import.meta.url).toString();var d;d=new URL(a("kyEFX").resolve("3SFpC"),import.meta.url).toString();var u;u=new URL(a("kyEFX").resolve("60fzs"),import.meta.url).toString();var m;m=new URL(a("kyEFX").resolve("8SaHN"),import.meta.url).toString();const g=document.querySelector(".modal"),p=document.querySelector(".books-container-list"),f=document.querySelector(".backdrop"),b=document.body;function v(e,t,o,n){if(!e.target.classList.contains("modal-add-btn"))return;let a=JSON.parse(localStorage.getItem("shopplist"))||[];a.push(n),localStorage.setItem("shopplist",JSON.stringify(a)),t.textContent="remove from the shopping list",t.classList.replace("modal-add-btn","modal-remove-btn"),o.style.display="block";const r=document.querySelector(".modal-remove-btn");r.addEventListener("click",(e=>{h(e,r,o,n)}))}function h(e,t,o,n){if(!e.target.classList.contains("modal-remove-btn"))return;const a=e.target.closest(".modal-id").dataset.id;const r=(JSON.parse(localStorage.getItem("shopplist"))||[]).filter((e=>e._id!==a));localStorage.setItem("shopplist",JSON.stringify(r)),t.textContent="add to shopping list",t.classList.replace("modal-remove-btn","modal-add-btn"),o.classList.toggle("is-hidden"),t.addEventListener("click",(e=>{v(e,t,o,n)}))}function k(){f.classList.add("is-hidden"),b.classList.remove("no-scroll"),window.removeEventListener("keydown",y)}function y(e){"Escape"===e.code&&(k(),b.classList.remove("no-scroll"),window.removeEventListener("keydown",y))}p.addEventListener("click",(async function(t){if(t.preventDefault(),console.log(t.target.nodeName),"UL"===t.target.nodeName||"BUTTON"===t.target.nodeName)return;const o=t.target.id;console.log(o);let n=JSON.parse(localStorage.getItem("shopplist"))||[];try{const t=await(0,i.fetchBookId)(o);g.innerHTML=function(t){let{_id:o,author:n,title:a,book_image:i,description:g,buy_links:p}=t;return`\n  <button type="button" class="modal-close-btn dark-close-btn" data-modal-close>\n        <svg class="modal-close-png dark-close-png">\n          <use href="${e(m)}#x-close"></use>\n        </svg>\n      </button>\n  <div data-id=${o} class="modal-id dark-modal-id">\n  <div class="modal-card-item">\n   <img src="${i}" alt="${a}" class="modal-book-img dark-modal-book-img" />\n   <div class="">\n     <h2 class="modal-book-name dark-modal-book-name">${a}</h2>\n     <p class="modal-book-autor dark-modal-book-autor">${n}</p>\n     <p class="modal-book-info dark-modal-book-info">${g}</p>\n     <div class="modal-box-link dark-modal-box-link">\n       <a href="${p[0].url}" class="modal-link dark-modal-link" target="_blank">\n       <img class="modal-link-svg dark-modal-link-svg dark-amazon"\n       src="${e(r)}"\n       srcset="\n       ${e(r)} 1x,\n       ${e(s)} 2x"\n       alt="amazon"\n       width="62"\n       height="19"\n     />\n       </a>\n       <a href="${p[1].url}" class="modal-link dark-modal-link" target="_blank">\n       <img class="modal-link-svg dark-modal-link-svg"\n       src="${e(l)}"\n       srcset="\n       ${e(l)} 1x,\n       ${e(c)} 2x"\n       alt="apple-books"\n       width="33"\n       height="32"\n     />\n       </a>\n       <a href="${p[4].url}" target="_blank" class="modal-link dark-modal-link">\n       <img class="modal-link-svg dark-modal-link-svg"\n          src="${e(d)}"\n          srcset="\n          ${e(d)} 1x,\n          ${e(u)} 2x"\n          alt="bookshop"\n          width="38"\n          height="36"\n        />\n     </a>\n       </div>\n    </div>\n    </div>\n    <button type="button" class="modal-add-btn dark-modal-add-btn">add to shopping list</button>\n    <p class="modal-remove-text dark-modal-remove-text">Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.</p>\n    </div>\n       `}(t);document.querySelector(".modal-close-btn").addEventListener("click",k),f.classList.remove("is-hidden"),b.classList.add("no-scroll"),window.addEventListener("keydown",y);const a=document.querySelector(".modal-add-btn"),p=document.querySelector(".modal-remove-text");if(n.some((e=>e._id===o))){a.textContent="remove from the shopping list",a.classList.replace("modal-add-btn","modal-remove-btn"),p.style.display="block";const e=document.querySelector(".modal-remove-btn");e.addEventListener("click",(o=>{h(o,e,p,t)}))}else a.addEventListener("click",(e=>{v(e,a,p,t)}))}catch(e){console.error(e)}finally{hideLoader()}})),f.addEventListener("click",(function(e){e.target.classList.contains("backdrop")&&k()}));i=a("7rYDH"),i=a("7rYDH");const _=document.querySelector(".loader-backdrop"),S=document.body;function L(){_.classList.remove("loader-is-hidden"),_.classList.add("loader-backdrop"),S.classList.add("loader-open")}function $(){_.classList.add("loader-is-hidden"),_.classList.remove("loader-backdrop"),S.classList.remove("loader-open")}const w=document.querySelector(".categories_list"),E=document.querySelector(".books-container-list");let x,H,q="";async function j(e){L();try{const t=await(0,i.fetchSelectCategory)(e);T(e),E.innerHTML=function(e){let t=R();return e.map((({_id:e,book_image:o,title:n,author:a})=>`<li class="book-card" id="${e}">\n  <a href="" class="book-card-thumb" id="${e}"\n    ><div class="thumb">\n    <img id="${e}" src="${o||t}" alt="${n}" class="books-image" onerror="handleImageError(this, ${t})" />\n    <div id="${e}" class="overlay"><p id="${e}"> quick view</p></div>\n    </div>\n    <p id="${e}" class="book-card-title">${N(n)}</p>\n    <p id="${e}" class="book-card-author">${O(a)}</p\n  ></a></li>`)).join("")}(t),$()}catch(e){console.error(e)}}function T(e){x=document.querySelector(".title-color1"),H=document.querySelector(".title-color2"),x.textContent=e.substring(0,F(e)),H.textContent=e.substring(F(e))}function F(e){return e.lastIndexOf(" ")}function R(){return window.matchMedia("(min-width: 1440px)").matches?"../img/default_images/default_img_desc.jpg":window.matchMedia("(min-width: 768px)").matches?"../img/default_images/default_img_table.jpg":"../img/default_images/default_img_mobile.jpg"}function N(e){return e.length>17?e.slice(0,17)+"...":e}function O(e){return e.length>28?e.slice(0,28)+"...":e}w.addEventListener("click",(e=>{let t=document.querySelector(".chosen_category");if(e.target!==t&&e.target!==e.currentTarget){if("All Categories"===e.target.textContent)return U(),q=e.target.textContent,t.classList.remove("chosen_category"),e.target.classList.add("chosen_category"),T("Best Sellers Books"),void(t=e.target);q=e.target.textContent,t.classList.remove("chosen_category"),e.target.classList.add("chosen_category"),t=e.target,j(q)}}));i=a("7rYDH");const I=document.querySelector(".categories_list");async function C(){try{const e=await(0,i.fetchCategoryList)();I.insertAdjacentHTML("beforeend",e.map((({list_name:e})=>`<li class="js_category_list_element category_list_element" data="${e}">${e}</li>`)).join(""))}catch{console.error(error)}}async function U(){L();try{const e=await(0,i.fetchTopBooks)(),t=document.querySelector(".books-container-list");T("Best Sellers Books"),t.innerHTML=e.map((({list_name:e,books:t})=>`<li class="top-books-ul">\n      <h2 class="top-books-category">${e}</h2>\n      <ul class="top-books-list">${function(e){let t=R();return e.map((({_id:e,book_image:o,title:n,author:a})=>`<li class="top-book-card" id="${e}">\n  <a href="" class="book-card-thumb" id="${e}">\n    <div class="thumb">\n      <img id="${e}" src="${o||t}" alt="${n}" class="books-image" onerror="handleImageError(this, ${t})" />\n      <div class="overlay" id="${e}"><p id="${e}"> quick view</p></div>\n    </div>\n    <p id="${e}" class="book-card-title">${N(n)}</p>\n    <p id="${e}" class="book-card-author">${O(a)}</p>\n    </a></li>`)).join("")}(t)}</ul>\n      ${function(e){return`\n      <div class="div-button">\n        <button data-list="${e}" href="" class="button-open-categories">SEE MORE</button>\n      </div>\n    `}(e)}\n        </li>\n        `)).join("");!function(e){e.forEach((e=>{e.addEventListener("click",(()=>{const t=e.getAttribute("data-list");j(t);const o=document.querySelector(`[data="${t}"]`);document.querySelector(".chosen_category").classList.remove("chosen_category"),o.classList.add("chosen_category"),o.scrollIntoView({block:"center",behavior:"smooth"})}))}))}(document.querySelectorAll(".button-open-categories")),$()}catch(e){console.error(e)}}!async function(){L();try{const[]=await Promise.all([C(),U()]);$()}catch(e){console.error(e)}}(),a("ghT7p");var A,M=/^\s+|\s+$/g,B=/^[-+]0x[0-9a-f]+$/i,D=/^0b[01]+$/i,X=/^0o[0-7]+$/i,W=parseInt,J="object"==typeof t&&t&&t.Object===Object&&t,z="object"==typeof self&&self&&self.Object===Object&&self,Y=J||z||Function("return this")(),Z=Object.prototype.toString,G=Math.max,P=Math.min,V=function(){return Y.Date.now()};function K(e,t,o){var n,a,r,i,s,l,c=0,d=!1,u=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var o=n,r=a;return n=a=void 0,c=t,i=e.apply(r,o)}function p(e){return c=e,s=setTimeout(b,t),d?g(e):i}function f(e){var o=e-l;return void 0===l||o>=t||o<0||u&&e-c>=r}function b(){var e=V();if(f(e))return v(e);s=setTimeout(b,function(e){var o=t-(e-l);return u?P(o,r-(e-c)):o}(e))}function v(e){return s=void 0,m&&n?g(e):(n=a=void 0,i)}function h(){var e=V(),o=f(e);if(n=arguments,a=this,l=e,o){if(void 0===s)return p(l);if(u)return s=setTimeout(b,t),g(l)}return void 0===s&&(s=setTimeout(b,t)),i}return t=ee(t)||0,Q(o)&&(d=!!o.leading,r=(u="maxWait"in o)?G(ee(o.maxWait)||0,t):r,m="trailing"in o?!!o.trailing:m),h.cancel=function(){void 0!==s&&clearTimeout(s),c=0,n=l=a=s=void 0},h.flush=function(){return void 0===s?i:v(V())},h}function Q(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function ee(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==Z.call(e)}(e))return NaN;if(Q(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Q(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(M,"");var o=D.test(e);return o||X.test(e)?W(e.slice(2),o?2:8):B.test(e)?NaN:+e}A=function(e,t,o){var n=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Q(o)&&(n="leading"in o?!!o.leading:n,a="trailing"in o?!!o.trailing:a),K(e,t,{leading:n,maxWait:t,trailing:a})};const te=document.querySelector(".scroll-up");te.addEventListener("click",(()=>window.scrollTo({top:0,left:0,behavior:"smooth"}))),document.addEventListener("scroll",e(A)((function(){let e=document.documentElement,t=e.scrollTop,o=e.scrollHeight-e.clientHeight;t/o>.05?te.classList.add("showButton"):te.classList.remove("showButton")}),1e3));
//# sourceMappingURL=index.121137c4.js.map
