!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){o[e]=t},t.parcelRequired7c6=a),a("iE7OH").register(JSON.parse('{"EVgbq":"index.c830089c.js","4IAcE":"image1@1x.06fa7713.png","ixwRt":"image1@2x.08fa6ff3.png","gcnlj":"image2@1x.57ecc8dc.png","hG39U":"image2@2x.c5385d25.png","iYXGX":"image3@1x.e5effbae.png","bPJ9f":"image3@2x.3b8922c8.png","eAXxV":"sprite.8887ca5d.svg","01IoP":"shopping-list.77080875.js"}')),a("i8Q71"),a("8Veln");var r,c=a("bpxeT"),i=a("2TvXO"),s=a("b7ONl");r=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("4IAcE");var l;l=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("ixwRt");var d;d=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("gcnlj");var u;u=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("hG39U");var m;m=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("iYXGX");var f;f=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("bPJ9f");var p;p=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("eAXxV");var v=document.querySelector(".loader-backdrop"),g=document.body;function b(){v.classList.remove("is-hidden"),g.classList.add("loader-open")}function h(){v.classList.add("is-hidden"),g.classList.remove("loader-open")}var k=document.querySelector(".modal"),y=document.querySelector(".books-container-list"),x=document.querySelector(".backdrop"),_=document.body,E="shopplist";function L(){return(L=e(c)(e(i).mark((function t(n){var o,a,r,c,l,d;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),"IMG"===n.target.nodeName){e.next=3;break}return e.abrupt("return");case 3:return b(),o=n.target.id,a=JSON.parse(localStorage.getItem(E))||[],e.prev=6,e.next=9,(0,s.fetchBookId)(o);case 9:r=e.sent,k.innerHTML=O(r),document.querySelector(".modal-close-btn").addEventListener("click",q),x.classList.remove("is-hidden"),_.classList.add("no-scroll"),window.addEventListener("keydown",H),c=document.querySelector(".modal-add-btn"),l=document.querySelector(".modal-remove-text"),a.some((function(e){return e._id===o}))?(c.textContent="remove from the shopping list",c.classList.replace("modal-add-btn","modal-remove-btn"),l.style.display="block",(d=document.querySelector(".modal-remove-btn")).addEventListener("click",(function(e){S(e,d,l,r)}))):c.addEventListener("click",(function(e){w(e,c,l,r)})),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(6),console.error(e.t0);case 24:return e.prev=24,h(),e.finish(24);case 27:case"end":return e.stop()}}),t,null,[[6,21,24,27]])})))).apply(this,arguments)}function w(e,t,n,o){if(e.target.classList.contains("modal-add-btn")){var a=JSON.parse(localStorage.getItem(E))||[];a.push(o),localStorage.setItem(E,JSON.stringify(a)),t.textContent="remove from the shopping list",t.classList.replace("modal-add-btn","modal-remove-btn"),n.style.display="block";var r=document.querySelector(".modal-remove-btn");r.addEventListener("click",(function(e){S(e,r,n,o)}))}}function S(e,t,n,o){if(e.target.classList.contains("modal-remove-btn")){var a=e.target.closest(".modal-id").dataset.id,r=(JSON.parse(localStorage.getItem(E))||[]).filter((function(e){return e._id!==a}));localStorage.setItem(E,JSON.stringify(r)),t.textContent="add to shopping list",t.classList.replace("modal-remove-btn","modal-add-btn"),n.classList.toggle("is-hidden"),t.addEventListener("click",(function(e){w(e,t,n,o)}))}}function O(t){var n=t._id,o=t.author,a=t.title,c=t.book_image,i=t.description,s=t.buy_links;return'\n  <button type="button" class="modal-close-btn dark-close-btn" data-modal-close>\n        <svg class="modal-close-png dark-close-png">\n          <use href="'.concat(e(p),'#x-close"></use>\n        </svg>\n      </button>\n  <div data-id=').concat(n,' class="modal-id dark-modal-id">\n  <div class="modal-card-item">\n   <img src="').concat(c,'" alt="').concat(a,'" class="modal-book-img dark-modal-book-img" />\n   <div class="">\n     <h2 class="modal-book-name dark-modal-book-name">').concat(a,'</h2>\n     <p class="modal-book-autor dark-modal-book-autor">').concat(o,'</p>\n     <p class="modal-book-info dark-modal-book-info">').concat(i,'</p>\n     <div class="modal-box-link dark-modal-box-link">\n       <a href="').concat(s[0].url,'" class="modal-link dark-modal-link" target="_blank">\n       <img class="modal-link-svg dark-modal-link-svg dark-amazon"\n       src="').concat(e(r),'"\n       srcset="\n       ').concat(e(r)," 1x,\n       ").concat(e(l),' 2x"\n       alt="amazon"\n       width="62"\n       height="19"\n     />\n       </a>\n       <a href="').concat(s[1].url,'" class="modal-link dark-modal-link" target="_blank">\n       <img class="modal-link-svg dark-modal-link-svg"\n       src="').concat(e(d),'"\n       srcset="\n       ').concat(e(d)," 1x,\n       ").concat(e(u),' 2x"\n       alt="apple-books"\n       width="33"\n       height="32"\n     />\n       </a>\n       <a href="').concat(s[4].url,'" target="_blank" class="modal-link dark-modal-link">\n       <img class="modal-link-svg dark-modal-link-svg"\n          src="').concat(e(m),'"\n          srcset="\n          ').concat(e(m)," 1x,\n          ").concat(e(f),' 2x"\n          alt="bookshop"\n          width="38"\n          height="36"\n        />\n     </a>\n       </div>\n    </div>\n    </div>\n    <button type="button" class="modal-add-btn dark-modal-add-btn">add to shopping list</button>\n    <p class="modal-remove-text dark-modal-remove-text">Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.</p>\n    </div>\n       ')}function q(){x.classList.add("is-hidden"),_.classList.remove("no-scroll"),window.removeEventListener("keydown",H)}function H(e){"Escape"===e.code&&(q(),_.classList.remove("no-scroll"),window.removeEventListener("keydown",H))}y.addEventListener("click",(function(e){return L.apply(this,arguments)})),x.addEventListener("click",(function(e){e.target.classList.contains("backdrop")&&q()}));c=a("bpxeT");var T,N,j=a("1t1Wn"),R=(i=a("2TvXO"),s=a("b7ONl"),c=a("bpxeT"),i=a("2TvXO"),s=a("b7ONl"),document.querySelector(".categories_list")),C=document.querySelector(".books-container-list"),A="";function B(e){return I.apply(this,arguments)}function I(){return(I=e(c)(e(i).mark((function t(n){var o;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(),e.prev=1,e.next=4,(0,s.fetchSelectCategory)(n);case 4:o=e.sent,J(n),C.innerHTML=M(o),h(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),t,null,[[1,10]])})))).apply(this,arguments)}function J(e){T=document.querySelector(".title-color1"),N=document.querySelector(".title-color2"),T.textContent=e.substring(0,V(e)),N.textContent=e.substring(V(e))}function V(e){return e.lastIndexOf(" ")}function M(e){var t=F();return e.map((function(e){var n=e._id,o=e.book_image,a=e.title,r=e.author,c=o||t;return'<li class="book-card">\n  <a href="" class="book-card-thumb"\n    ><div class="thumb">\n    <img id="'.concat(n,'" src="').concat(c,'" alt="').concat(a,'" class="books-image" onerror="handleImageError(this, ').concat(t,')" />\n    <div class="overlay"><p> quick view</p></div>\n    </div>\n    <p class="book-card-title">').concat(a,'</p>\n    <p class="book-card-author">').concat(r,"</p\n  ></a></li>")})).join("")}function F(){return window.matchMedia("(min-width: 1440px)").matches?"../img/default_images/default_img_desc.jpg":window.matchMedia("(min-width: 768px)").matches?"../img/default_images/default_img_table.jpg":"../img/default_images/default_img_mobile.jpg"}R.addEventListener("click",(function(e){var t=document.querySelector(".chosen_category");if(e.target!==t&&e.target!==e.currentTarget){if("All Categories"===e.target.textContent)return P(),A=e.target.textContent,t.classList.remove("chosen_category"),e.target.classList.add("chosen_category"),J("Best Sellers Books"),void(t=e.target);A=e.target.textContent,t.classList.remove("chosen_category"),e.target.classList.add("chosen_category"),t=e.target,B(A)}}));c=a("bpxeT"),i=a("2TvXO"),s=a("b7ONl");var U=document.querySelector(".categories_list");function X(){return G.apply(this,arguments)}function G(){return(G=e(c)(e(i).mark((function t(){var n;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.fetchCategoryList)();case 3:n=e.sent,U.insertAdjacentHTML("beforeend",D(n)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(error);case 10:case"end":return e.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function D(e){return e.map((function(e){var t=e.list_name;return'<li class="js_category_list_element category_list_element" data="'.concat(t,'">').concat(t,"</li>")})).join("")}function P(){return W.apply(this,arguments)}function W(){return(W=e(c)(e(i).mark((function t(){var n,o;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(),e.prev=1,e.next=4,(0,s.fetchTopBooks)();case 4:n=e.sent,o=document.querySelector(".books-container-list"),J("Best Sellers Books"),o.innerHTML=Y(n),$(document.querySelectorAll(".button-open-categories")),h(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0);case 16:case"end":return e.stop()}}),t,null,[[1,13]])})))).apply(this,arguments)}function $(e){e.forEach((function(e){e.addEventListener("click",(function(){var t=e.getAttribute("data-list");B(t);var n=document.querySelector('[data="'.concat(t,'"]'));document.querySelector(".chosen_category").classList.remove("chosen_category"),n.classList.add("chosen_category"),n.scrollIntoView({block:"center",behavior:"smooth"})}))}))}function Y(e){return e.map((function(e){var t=e.list_name,n=e.books;return'<li class="top-books-ul">\n      <h2 class="top-books-category">'.concat(t,'</h2>\n      <ul class="top-books-list">').concat(function(e){var t=F();return e.map((function(e){var n=e._id,o=e.book_image,a=e.title,r=e.author,c=o||t;return'<li class="top-book-card">\n  <a href="" class="book-card-thumb"\n    ><div class="thumb">\n    <img id="'.concat(n,'" src="').concat(c,'" alt="').concat(a,'" class="books-image" onerror="handleImageError(this, ').concat(t,')" />\n    <div class="overlay"><p> quick view</p></div>\n    </div>\n    <p class="book-card-title">').concat(a,'</p>\n    <p class="book-card-author">').concat(r,"</p\n  ></a></li>")})).join("")}(n),"</ul>\n      ").concat(function(e){return'\n      <div class="div-button">\n        <button data-list="'.concat(e,'" href="" class="button-open-categories">SEE MORE</button>\n      </div>\n    ')}(t),"\n        </li>\n        ")})).join("")}function z(){return(z=e(c)(e(i).mark((function t(){return e(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b(),t.prev=1,t.t0=e(j),t.next=5,Promise.all([X(),P()]);case 5:t.t1=t.sent,(0,t.t0)(t.t1,0),h(),t.next=13;break;case 10:t.prev=10,t.t2=t.catch(1),console.error(t.t2);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))).apply(this,arguments)}!function(){z.apply(this,arguments)}(),a("32ZrB");var Q,Z=a("l5bVx"),K="Expected a function",ee=/^\s+|\s+$/g,te=/^[-+]0x[0-9a-f]+$/i,ne=/^0b[01]+$/i,oe=/^0o[0-7]+$/i,ae=parseInt,re="object"==typeof t&&t&&t.Object===Object&&t,ce="object"==typeof self&&self&&self.Object===Object&&self,ie=re||ce||Function("return this")(),se=Object.prototype.toString,le=Math.max,de=Math.min,ue=function(){return ie.Date.now()};function me(e,t,n){var o,a,r,c,i,s,l=0,d=!1,u=!1,m=!0;if("function"!=typeof e)throw new TypeError(K);function f(t){var n=o,r=a;return o=a=void 0,l=t,c=e.apply(r,n)}function p(e){return l=e,i=setTimeout(g,t),d?f(e):c}function v(e){var n=e-s;return void 0===s||n>=t||n<0||u&&e-l>=r}function g(){var e=ue();if(v(e))return b(e);i=setTimeout(g,function(e){var n=t-(e-s);return u?de(n,r-(e-l)):n}(e))}function b(e){return i=void 0,m&&o?f(e):(o=a=void 0,c)}function h(){var e=ue(),n=v(e);if(o=arguments,a=this,s=e,n){if(void 0===i)return p(s);if(u)return i=setTimeout(g,t),f(s)}return void 0===i&&(i=setTimeout(g,t)),c}return t=pe(t)||0,fe(n)&&(d=!!n.leading,r=(u="maxWait"in n)?le(pe(n.maxWait)||0,t):r,m="trailing"in n?!!n.trailing:m),h.cancel=function(){void 0!==i&&clearTimeout(i),l=0,o=s=a=i=void 0},h.flush=function(){return void 0===i?c:b(ue())},h}function fe(t){var n=void 0===t?"undefined":e(Z)(t);return!!t&&("object"==n||"function"==n)}function pe(t){if("number"==typeof t)return t;if(function(t){return"symbol"==(void 0===t?"undefined":e(Z)(t))||function(e){return!!e&&"object"==typeof e}(t)&&"[object Symbol]"==se.call(t)}(t))return NaN;if(fe(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=fe(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(ee,"");var o=ne.test(t);return o||oe.test(t)?ae(t.slice(2),o?2:8):te.test(t)?NaN:+t}Q=function(e,t,n){var o=!0,a=!0;if("function"!=typeof e)throw new TypeError(K);return fe(n)&&(o="leading"in n?!!n.leading:o,a="trailing"in n?!!n.trailing:a),me(e,t,{leading:o,maxWait:t,trailing:a})};var ve=document.querySelector(".scroll-up");ve.addEventListener("click",(function(){return window.scrollTo({top:0,left:0,behavior:"smooth"})})),document.addEventListener("scroll",e(Q)((function(){var e=document.documentElement,t=e.scrollTop,n=e.scrollHeight-e.clientHeight;t/n>.05?ve.classList.add("showButton"):ve.classList.remove("showButton")}),1e3))}();
//# sourceMappingURL=index.c830089c.js.map
